{% extends "base.html.twig" %}

{% block title %}Index{% endblock %}
{% block content %}
    <h1>Liste des manuscrits de la bibliothèque du Patrimoine de Clermont Auvergne Métropole</h1>

    <p>
        <a href="create.php">
            <button>➕ Ajouter un manuscrit</button>
        </a>
    </p>

    <table>
        <tr>
            <th>Référence</th>
            <th>Titre</th>
            <th>Auteur</th>
            <th>Actions</th>
        </tr>

        {% for document in list %}
            <tr>
                <td>{{ document._id }}</td>
                <td>{{ document.titre }}</td>
                <td>{{ document.auteur }}</td>
                <td>
                    <a href="get.php?id={{ document._id }}">voir</a>
                    &nbsp;/&nbsp;
                    <a href="edit.php?id={{ document._id }}">éditer</a>
                    &nbsp;/&nbsp;
                    <a href="delete.php?id={{ document._id }}">supprimer</a>
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4">Aucun manuscrit trouvé.</td>
            </tr>
        {% endfor %}
    </table>

    <nav class="pagination" style="margin-top: 20px;">
        {% if currentPage > 1 %}
            <a href="?page={{ currentPage - 1 }}">Précédent</a>
        {% endif %}

        {% for page in 1..totalPages %}
            {% if page == currentPage %}
                <strong style="margin: 0 5px;">[{{ page }}]</strong>
            {% else %}
                <a href="?page={{ page }}" style="margin: 0 5px;">{{ page }}</a>
            {% endif %}
        {% endfor %}

        {% if currentPage < totalPages %}
            <a href="?page={{ currentPage + 1 }}">Suivant</a>
        {% endif %}
    </nav>
{% endblock %}
